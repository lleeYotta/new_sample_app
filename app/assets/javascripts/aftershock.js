
(function(h,O){O(h)})('undefined'!==typeof window?window:this,function(h,O){function aa(a,b,c,e){if(f.sequenceWrites&&'script'==a.nodeName.toLowerCase()){for(var g in v)if(0<v[g].length&&e.writeLocation!=v[g][0].getWriteSelector())return d.def(e.writeLocation)&&(a.yo_writeSelector=e.writeLocation),v[g][0].addScript(a),!1;g=null;f&&(g=d.select(e.writeLocation));if(null!=g){a.write_context=new t(g,a,e.writeLocation);var p=v[e.writeLocation];d.undef(p)&&(p=v[e.writeLocation]=[]);p.push(a.write_context); K=function(){var a=Array.prototype.slice.call(arguments,0,-1).join('');0<p.length&&p[p.length-1].collectDocumentWrite(a)};a.original_onload=a.onload;a.original_onreadystatechange=a.onreadystatechange;a.onload=a.onreadystatechange=null;var l=!1;a.onerror=a.onload=function(){l||this.readyState&&'loaded'!==this.readyState&&'complete'!==this.readyState||(d.log('loading ',this,this.write_context.getId()),l=!0,this.original_onload?this.original_onload.call(arguments):k.publish({topic:'sequence/afterloaded/'+ a.src,message:a}),this.write_context.finalizeWriteOverride(),this.original_onload=this.write_context=this.onload=this.onreadystatechange=null)};a.onreadystatechange=function(){l||this.readyState&&'loaded'!==this.readyState&&'complete'!==this.readyState||(d.log('loading ',this,this.write_context.getId()),l=!0,this.original_onload||k.publish({topic:'sequence/afterloaded/'+a.src,message:a}),this.write_context.finalizeWriteOverride(),this.original_onload=this.write_context=this.onload=this.onreadystatechange= null);this.original_onreadystatechange&&this.original_onreadystatechange.call(arguments)}}}return!0}function P(a,b){for(;a.firstChild;)a.removeChild(a.firstChild);d.writeHTML(a,b)}function ba(){for(var a=0;a<f.delayed.length;a++)if('none'!=f.delayed[a].delayType)return;null!=f.intervalID&&(clearInterval(f.intervalID),f.intervalID=null,d.log('Turning off response timer all objects are loaded.'))}function Q(a){f.sequenceWrites&&d.undef(a.yo_write)&&(a.yo_write=a.write,K=ca,a.writeln=a.write=function(){var b= Array.prototype.slice.call(arguments).join('');K(b,a)})}function ca(a,b){for(var c=!1,e=0;e<f.write.length;e++){var g=f.write[e];if(a.match(g.start)||1==g.state){var e={document:b},p;for(p in g)e[p]=g[p];c=!0;g.string&&!1==L?g.string+=a:(g.state=1,g.string=a);if(d.undef(g.end)||a.match(g.end)){if(d.undef(e.delayType)||'none'==e.delayType){g.config=e;if(d.def(e.onBefore))e.onBefore(g,b);d.undef(e.selector)||null==e.selector?e.selector=b:e.selector=d.select(e.selector);e.selector.yo_write?(L=!0,-1!= g.string.indexOf('m_js_controller.js')&&(L=!0),e.selector.yo_write(g.string)):d.writeHTML(e.selector,g.string,e.how);if(d.def(e.onAfter))e.onAfter(g,b)}else d.undef(e.selector)?(e.selector='yo_write_'+Math.floor(1E9*Math.random()),d.undef(e.how)&&(e.how='append'),d.undef(e.delayValue)&&(e.delayValue=e.selector),document.yo_write('<di'+'v id='+e.selector+' style=width:0px;height:0px></di'+'v>'),e.selector=d.select(e.selector).parentNode):e.selector=d.select(e.selector),p=Yo.sequence.resource(''),d.def(e.onBefore)&& p.beforeLoading(e.onBefore),d.def(e.onLoad)&&p.afterLoaded(e.onLoad),p.type='inner',p.how=g.how,p.newNode=a,p.before=e.selector,p.me=e.selector,f.delayed.push(p),domCompleteTriggered&&p.execute();g.state=2;g.string=''}break}}!1==c&&b.yo_write(a);d.log('write hander = '+a)}function P(a,b){for(;a.firstChild;)a.removeChild(a.firstChild);da(a,b)}function da(a,b,c){var e=document.createElement('div');e.innerHTML='string'===typeof b?b:b.innerHTML;for(b=e.childNodes;0<b.length;)'insert'==c?a.parentNode.insertBefore(e.removeChild(b[0]), a):a.appendChild(e.removeChild(b[0]));return this}function R(a){for(var b=0;b<f.srcAttrs.length;b++){var c=a.getAttribute(f.srcAttrs[b]);if(null!=c)return c}return(c=a.getAttribute('src'))&&'data:image/cloaked;plain,'==c.slice(0,25)?c.substring(25):null}function ea(a){a='string'===typeof a?d.select(a):a;var b=content=d.select(a.getAttribute(f.pre+'location')),c=a.getAttribute(f.pre+'how'),e=new (_delayed()),g=a.nodeName.toLowerCase(),p=a;'eval'==c||'gpt'==c?(content=a.innerHTML,e=Yo.sequence.script(content)): null==c&&(c='replace');var l=a.getAttribute(f.pre+'delayType'),k=a.getAttribute(f.pre+'delayValue'),C=a.getAttribute('src'),n=R(a),y=n&&0<n.length?'src':'inner',C=a.getAttribute(f.pre+'animator'),q=a.getAttribute(f.pre+'onbefore');null!=q&&d.isFunction(h[q])&&e.beforeLoading(h[q]);var m=a.getAttribute(f.pre+'onLoad');null!=m&&d.isFunction(h[m])&&e.afterLoaded(h[m]);null==content&&(content=a,c='insert');if(-1===d.inArray(a,f.targets)){e.animator=C;if('img'==g)null==l&&(l='lazy'),null==b&&(b=a);else if('script'== g){g=a.getAttribute('type');null!=g&&(g=g.split('/'),2<g.length&&(l=g[2],k=g[3]));g=a.getAttribute(f.pre+'writeLocation');C=a.getAttribute(f.pre+'src');if(null!=C)return null==l&&(l='none'),e=Yo.sequence.script(C)[l](k),null!=q&&d.isFunction(h[q])&&e.beforeLoading(h[q]),null!=m&&d.isFunction(h[m])&&e.afterLoaded(h[m]),null!=g&&e.writeLocation(g),e.load(),e;null==b&&(b=a);null!=g&&(e.writeLocation=g)}null==l&&(l='none');!0==d.contains(document.documentElement,a)&&a.setAttribute(f.pre+'loaded','true'); e[l](k);e.before=b;e.me=p;e.type=y;e.srcAttr=n;e.how=c;e.match=!1;e.newNode='eval'==c||'gpt'==c?content:a;return e}}function S(a){return function(b,c,e){var d=F[(a?'on':'')+b];if(d)d.triggered?setTimeout(function(){c(d.event)},0):d.listeners.push(c);else return a?this.yo_addEventListener(b,c,e):this.yo_attachEvent(b,c,e)}}function fa(a,b,c){function e(a){d.log('Loading '+c.before.src+' via event handler '+c.delayValue);c.afterShock();var f=null;d.def(a.currentTarget)?f=a.currentTarget:d.def(a.srcElement)&& (f=a.srcElement);d.removeEvent(f,b[0],e)}d.log('Adding event ',b[0],b[1]);d.addEvent(a,b[0],e)}function T(a,b){return a.top>b.top-a.height&&a.bottom<b.bottom+f.offset+2*a.height&&a.left>b.left-a.width&&a.right<b.right+f.offset+2*a.width}function ha(a,b){return U(this,a,b,'insert')}function ia(a){return U(this,a,a,'append')}function U(a,b,c,e){k.publish({topic:'sequence/captured',message:{parentNode:a,newNode:b,before:c,captureType:e}});if(!1==V(b,a,function(a,d){var l=a.clone();l.type=e;l.newNode= b;l.before=c;l.me=d;f.delayed.push(l);b.setAttribute(f.srcAttr,b.getAttribute(f.srcAttr))}))return G.safeWriteInsert(b,c,a,H(b),'append'==e);a=f.delayed[f.delayed.length-1];if(domCompleteTriggered||'none'==a.delayType)return a.execute()}function V(a,b,c){var e=a.nodeName.toLowerCase(),g=null,f=!1;if('script'==e||'iframe'==e){g=H(a);c(g,b);var f=!0,l=!1;a.onload&&(a.onloadOriginal=a.onload);a.onreadystatechange&&(a.onreadystatechangeOriginal=a.onreadystatechange);a.onreadystatechange=a.onload=null; a.onreadystatechange=function(){l||this.readyState&&'loaded'!==this.readyState&&'complete'!==this.readyState||(k.publish({topic:'sequence/afterloaded/'+g.key,message:g}),l=!0);this.onreadystatechangeOriginal&&this.onreadystatechangeOriginal.apply(this,arguments)};a.onload=function(){!1==l&&(k.publish({topic:'sequence/afterloaded/'+g.key,message:g}),l=!0);this.onloadOriginal&&this.onloadOriginal.apply(this,arguments)}}else if(g=H(b),null==g||'none'!=g.delayType)c(g,b),g.before=b,f=!0;d.log(a.nodeName+ ' '+a.src+' is'+(f?' ':' NOT ')+'sequenced.');!1==f&&k.publish({topic:'sequence/beforeloading/'+g.key,message:g});return f}function H(a){var b=a.src;!0==d.def(a.yo_src)&&(b=a.yo_src);if(null==b||0==b.length)return b=new (_delayed()),b.delayType='none',b;for(var c=0;c<f.resources.length;c++){var e=f.resources[c],g;if(g=!0==e.match){g=e.url;var p=b;null==g||null==p?g=!1:(d.log('Match src',p,'and url',g),g='string'===typeof g&&-1!=p.indexOf(g)||null!=p.match(g));g=!0==g}if(g)return d.log('Found configuration for '+ b+' delayType '+e.delayType),'empty'==e.delayType&&(a.src=null==e.delaySrc?'data:text/javascript;plain,//':e.delaySrc,e.delayType='none'),e}d.log('Did NOT find configuration for '+b+' checking local configuration. ');b=new (_delayed());if(null!=a.delayType)'empty'==a.delayType&&(a.src=null==a.delaySrc?'data:text/javascript;plain,//':a.delaySrc,a.delayType='none'),b[a.delayType](a.delayValue);else b[f.defaultType](f.defaultDelay);b.before=a;return b}function W(){for(var a=0;a<f.resources.length;a++){var b= f.resources[a];if(!b.isConfig){var c=new (_delayed());c.key=c.url=b.url;c.match=!0;c.local=!0;c[b.delayType](b.delayValue);f.resources[a]=c}}}var f={defaultDelay:5E3,defaultType:'none',log:!1,throttle:20,sequenceXHR:!1,sequenceWrites:!1,sendTimingData:!1,timingDataURL:'',offset:100,loadOnDOM:!1,scan:['script','img'],resources:[],abTesting:[],write:[],intervalID:null,lazyCheckSize:!0,pre:'data-yo-',srcAttrs:['data-yo-src','data-yo-srcset'],afterShockLoaded:!1},d={},D=h;d.log=function(){if(f.log&&d.def(D.console)&& d.def(D.console.log)){for(var a='',b=0;b<arguments.length;b++){var c=arguments[b],e='';'object'===typeof c&&c&&d.def(c.nodeName)?(e=c.yo_src?'yo_src '+c.yo_src:c.src?'src '+c.src:'id '+c.id,a+='['+c.nodeName+', '+e+'] '):a+=c+' '}D.console.log('Yo.utils.log: '+a)}};d.def=function(a){return'undefined'!=typeof a};d.undef=function(a){return!d.def(a)};d.isFunction=function(a){return!!(a&&a.constructor&&a.call&&a.apply)};d.addEvent=function(a,b,c){a.attachEvent?a.attachEvent('on'+b,c):a.addEventListener&& a.addEventListener(b,c,!1)};d.removeEvent=function(a,b,c){a.detachEvent?a.detachEvent('on'+b,c):a.removeEventListener(b,c,!1)};d.inArray=function(a,b,c){var e;if(b){if(Array.prototype.indexOf)return Array.prototype.indexOf.call(b,a,c);e=b.length;for(c=c?0>c?Math.max(0,e+c):c:0;c<e;c++)if(c in b&&b[c]===a)return c}return-1};d.metaDataValue=function(a,b){var c=document.getElementsByName(a);return null!=c&&1==c.length?1==arguments.length?c[0].getAttribute('content'):c[0].setAttribute('content',b):null}; d.rewrite=function(a){var b=d.metaDataValue('resource.version'),c=d.metaDataValue('cdn.hostname'),e=d.metaDataValue('adn.id');return location.protocol+c+'/'+e+'/'+location.hostname+'/'+b+(0!=a.indexOf('/')?'/':'')+a};d.select=function(a){var b=-1;if(null==a||1==a.length)return null;if('document'==a)return document;if('window'==a)return h;if(d.def(a.nodeName))return a;if('.'==a[0])return a=document.getElementsByClassName(a.substring(1)),0<a.length?a[0]:null;if(-1!=(b=a.indexOf('['))){var c=a.substring(0, b),e=a.substring(b+1),g=e.indexOf(']'),f=e.indexOf('['),e=e.substring(0,g),l=0,g=-1,k=[],n=null;if(-1!=(l=e.indexOf('~')))g=2;else if(-1!=(l=e.indexOf('*')))g=1;else if(-1!=(l=e.indexOf('=')))g=0;else return null;if(-1!=f){f=a.substring(b+1+f+1);b=f.indexOf(']');try{f=parseInt(f.substring(0,b))}catch(m){}}var y=e.substring(0,l),l=e.substring(l+1);2==g&&(n=new RegExp(l));c=document.getElementsByTagName(c);for(b=0;b<c.length;b++){var q=0<y.length?c[b].getAttribute(y):c[b].innerHTML;0==g&&q==l?k.push(c[b]): 1==g&&null!=q&&-1!=q.indexOf(l)?k.push(c[b]):2==g&&null!=q&&-1!=q.search(n)&&k.push(c[b])}d.log(a,e,y,l,0==k.length?k.length:k[0]);return-1!=f?f<k.length?k[f]:null:k[0]}'#'==a[0]&&(a=a.substring(1));return document.getElementById(a)};d.writeHTML=function(a,b,c){var e=document.createElement('div');e.innerHTML='string'===typeof b?b:b.innerHTML;for(b=e.childNodes;0<b.length;)'insert'==c?a.parentNode.insertBefore(e.removeChild(b[0]),a):a.appendChild(e.removeChild(b[0]))};d.getCookie=function(a){for(var b= document.cookie.split(';'),c=0;c<b.length;c++){var e=b[c];if(-1!=e.indexOf(a)){for(;' '==e.charAt(0);)e=e.substring(1,e.length);return e.substring(a.length+1,e.length)}}return null};d.setCookie=function(a,b,c){var e='';c&&(e=new Date,e=new Date(e.getTime()+1E3*c),e='; expires='+e.toGMTString());document.cookie=a+'='+b+e+'; path=/';return!0};d.contains=document.documentElement.compareDocumentPosition?function(a,b){return!!(a.compareDocumentPosition(b)&16)}:document.documentElement.contains?function(a, b){return a!==b&&(a.contains?a.contains(b):!1)}:function(a,b){for(;b=b.parentNode;)if(b===a)return!0;return!1};d.updateHeadItemAttributes=function(a,b,c){0>a&&(document.cookie='yo-disable-instanton=true;Max-Age=2',h.location.reload(!0));a=document.documentElement.getElementsByTagName('head')[0].children[a];for(var e=0;e<b.length;e++)a.removeAttribute(b[e]);for(var d in c)a.setAttribute(d,c[d])};d.replaceHeadItemContent=function(a,b){0>a&&(document.cookie='yo-disable-instanton=true;Max-Age=2',h.location.reload(!0)); document.documentElement.getElementsByTagName('head')[0].children[a].textContent=b};var k={},z={},ja=1,X={},M=[];_executeCallback=function(a,b){setTimeout(function(){a.callback.call(a.context,b.message,b.topic)},0)};_addWildcards=function(a,b){for(var c=0;c<M.length;c++){var e=M[c];null!=b.topic.match(e.topic)&&a.push(e)}};k.subscribe=function(a){a.id=++ja;d.undef(a.priority)&&(a.priority=0);d.undef(a.priority)&&(a.priority=0);'string'===typeof a.topic&&-1!=a.topic.indexOf('*')&&(a.topic=new RegExp(a.topic.replace(/\*/g, '.*')));if('string'===typeof a.topic){a.topic=a.topic.toLowerCase();!0==d.undef(z[a.topic])&&(z[a.topic]=[]);z[a.topic].push(a);z[a.topic].sort(function(a,b){return b.priority-a.priority});var b=X[a.topic];d.def(b)&&b.callback.call(b.context,b.message,b.topic)}else M.push(a);d.log('_pubsub.subscribe',a.topic,a.id);return a.id};k.publish=function(a){a.topic=a.topic.toLowerCase();var b=z[a.topic];!0==d.undef(b)&&(b=[]);_addWildcards(b,a);a.persistent&&(X[a.topic]=a);if(!0==d.def(b)){for(var c=0;c<b.length;c++){var e= b[c];if(!0==a.async)_executeCallback(e,a);else var g=e.callback.call(e.context,a.message,a.topic);d.log('_pubsub.publish',e.topic,e.id);if(!1==g&&!0===a.cancellable)break}return b.length}d.log('_pubsub.publish',a.topic,'no callbacks');return 0};k.unsubscribe=function(a){for(var b in z)for(var c=z[b],e=0;e<c.length;e++)if(c[e].id==a)return c.splice(e,1),d.log('_pubsub.unsubscribe','found'),!0;d.log('_pubsub.unsubscribe','not found');return!1};var B=document,D=h;_loadCookieConfig=function(){var a=Yo.utils.getCookie('yo-aftershock-config'); if(null!=a&&0<a.length)try{a=eval(a),Yo.configure(a)}catch(b){}};_domready=function(){function a(a){b(a)}function b(a){('poll'===a||'readystatechange'===a.type)&&'complete'!==B.readyState||e||(e=!0,f.afterShockLoaded=!0,k.publish({topic:'core/load',async:!0,message:Yo,persistent:!0}))}function c(){try{B.documentElement.doScroll('left')}catch(a){setTimeout(c,50);return}b('poll')}var e=!1,g=!0;if('complete'===B.readyState)f.afterShockLoaded=!0,k.publish({topic:'core/load',async:!0,message:Yo,persistent:!0}); else{if(B.createEventObject&&B.documentElement.doScroll){try{g=!D.frameElement}catch(p){}g&&c()}!0==f.loadOnDOM&&(d.addEvent(document,'DOMContentLoaded',b),d.addEvent(document,'readystatechange',b));d.addEvent(h,'load',a)}};k.subscribe({topic:'core/start',callback:function(){_loadCookieConfig();_domready()}});var G={},v={},t=function(a,b,c){this.writeContent='';this.writeLocation=a;this.writeSelector=c;this.offScreenDom=null;this.node=b;this.scripts=[];this.id='yo_write_'+Math.floor(1E9*Math.random()); d.log('creating WriteContext',this.id,this.node.src);t.prototype.getId=function(a){return this.id};t.prototype.collectDocumentWrite=function(a){this.writeContent+=a;d.log('write override',this.getId(),this.node.src,a)};t.prototype.addScript=function(a){this.scripts.push(a)};t.prototype.getWriteSelector=function(a){return this.writeSelector};t.prototype.executeDeferredScripts=function(){for(var a=0;a<this.scripts.length;a++){var b=this.scripts[a].getAttribute('src');d.def(this.scripts[a].yo_src)&& (b=this.scripts[a].yo_src);Yo.sequence.script(b).none().writeLocation(this.scripts[a].yo_writeSelector).load()}};t.prototype.finalizeWriteOverride=function(){null==this.writeLocation?d.log('write location is null, content ignored',this.getId(),this.node.src):0<this.writeContent.length?(d.log('creating off screen DOM',this.getId(),this.node.src),this.offScreenDom=B.createElement('div'),this.offScreenDom.innerHTML=this.writeContent):d.log('no content, just continue',this.getId(),this.node.src);this.continueWrite()}; t.prototype.insertContent=function(){for(;0<this.offScreenDom.childNodes.length;){var a=this.offScreenDom.childNodes[0],b=a.nodeName.toLowerCase();if('script'==b){b=a.getAttribute('language');if(null==b||'vbscript'!=b.toLowerCase()){v[this.writeSelector].push(this);try{this.offScreenDom.removeChild(a)}catch(c){}Yo.sequence.script(a.getAttribute('src')).none().writeLocation(this.writeSelector).load();return!1}try{eval(a.innerHTML),this.offScreenDom.removeChild(a)}catch(d){}this.writeLocation.parentNode.insertBefore(a, this.writeLocation)}else if('link'==b&&'stylesheet'==a.getAttribute('rel').toLowerCase()){document.getElementsByTagName('head')[0].appendChild(a);try{this.offScreenDom.removeChild(a)}catch(f){}}else this.writeLocation.parentNode.insertBefore(a,this.writeLocation)}this.offScreenDom.innerHTML='';return!0};t.prototype.continueWrite=function(){for(var a=v[this.writeSelector],b=a.pop();b;){d.log('Continue writing ',b.getId());if(b.offScreenDom&&!1==b.insertContent())break;0==a.length&&b.executeDeferredScripts(); b=a.pop()}}};G.safeWriteInsert=function(a,b,c,e,g){if(!0==aa(a,b,c,e)){var f;a:{try{!0==d.def(a.yo_src)&&(a.src=a.yo_src);f=!0==g?c.yo_ac(a):c.yo_ib(a,b);break a}catch(h){d.log('ERROR adding node into dom',a,h)}f=void 0}return f}};f.delayed=[];f.targets=[];var r=function(){this.executed=!1;this.cont=!0};r.prototype.afterLoaded=function(a){k.subscribe({topic:'sequence/afterloaded/'+this.key,callback:a,context:this});return this};r.prototype.beforeLoading=function(a){k.subscribe({topic:'sequence/beforeloading/'+ this.key,callback:a,context:this});return this};r.prototype.execute=function(){return this.afterShock()};r.prototype.clone=function(){var a=new r,b;for(b in this)a[b]=this[b];return a};r.prototype.preventDefault=function(){this.cont=!1};r.prototype.key=null;r.prototype.isConfig=function(a){return this.delayType==a};r.prototype.afterShock=function(){var a=null;if(!0!=this.loaded&&(this.delayType='none',this.loaded=!0,d.log('Injecting ',this.newNode,', by ',this.type,' into the DOM now.'),k.publish({topic:'sequence/beforeloading/'+ this.key,message:this}),!1!=this.cont)){var b=this.newNode,c=this.type,e=this.before;if('insert'==c)a=G.safeWriteInsert(b,e,this.me,this,!1);else if('append'==c)a=G.safeWriteInsert(b,null,this.me,this,!0);else if('replace'==c)this.me.replaceChild(b,e);else if('src'==c)d.def(this.animator)&&null!=this.animator?animator(e,this.animator):d.def(f.animator)&&animator(e,f.animator),b=e.getAttribute(f.pre+'srcset'),null!=b&&e.setAttribute('srcset',b),e.src=this.srcAttr;else if('style'==c)b.setAttribute('style', b.getAttribute(f.pre+'style'));else if('inner'==c){d.log(this.how+' -> '+b);if('replace'==this.how)P(e,b);else if('eval'==this.how||'gpt'==this.how)try{b=b.replace('<scri'+'ipt>','').replace('\x3c/scri'+'ipt>',''),'gpt'==this.how&&(b='googletag.cmd.push(function() { googletag.pubads().enableSyncRendering = function(){}; '+b+'});'),h.eval(b)}catch(g){d.log('Error eval',g)}else d.writeHTML(e,b,this.how);k.publish({topic:'sequence/afterloaded/'+this.key,message:this})}else if('xhr'==c){this.xhr.onreadystatechange&& (this.xhr.original_oonreadystatechange=this.xhr.onreadystatechange);var p=this;this.xhr.onreadystatechange=function(a){4==p.xhr.readyState&&k.publish({topic:'sequence/afterloaded/'+p.key,message:[a,this]});p.xhr.original_oonreadystatechange&&p.xhr.original_oonreadystatechange.call(arguments)};this.xhr.xhr_send.apply(this.xhr,this.xhr._yo.send_args)}else'image'==c&&this.loadImage(this);ba();return a}};_delayed=function(){return r};var I=function(a){var b=new (_delayed());b.key=b.url=a;b.match=!0;d.undef(f.resources)&& (f.resources=[]);for(var c=-1,e=0;e<f.resources.length;e++){var g=f.resources[e].url;if('string'===typeof a&&'string'===typeof g&&-1!=a.indexOf(g)||'string'!==typeof g&&'string'===typeof a&&null!=a.match(g)){c=e;break}}b.writeLocation=function(a){this.writeLocation=a;return this};-1==c?f.resources.push(b):f.resources.splice(c,0,b);return b},K=null,L=!1;k.subscribe({topic:'core/configure',callback:function(){Q(document)}});var w={};_xhrOpen=function(a,b,c,e,g){this._yo={open_args:arguments,async:!1=== c?!1:!0};d.log('xhr open = '+b+', async '+c);k.publish({topic:'sequence/captured',message:this._yo});return this.xhr_open.apply(this,arguments)};_xhrSend=function(a){if(d.undef(this._yo)||!0!==this._yo.async)return this.xhr_send.apply(this,arguments);var b=this,c={src:this._yo.open_args[1],nodeName:'xhr'};if(!1==V(c,c,function(a,c){var d=a.clone();d.type='xhr';d.xhr=b;d.newNode=c;f.delayed.push(d);!0==f.afterShockLoaded&&d.execute()}))return d.log('xhr send is NOT defered, '+c.src),this.xhr_send.apply(this, arguments);this._yo.send_args=arguments;d.log('xhr send is defered, '+c.src+', '+f.delayed[f.delayed.length-1].delayType)};_xhrAbort=function(){if(d.undef(this._yo)||d.undef(this._yo.send_args)||!0!==this._yo.async)return this.xhr_abort.apply(this,arguments);d.log('Abort to the xhr object is called',' async true')};w.create=function(a){return I(a)};w.captureMethods=function(a){!0==d.undef(a.XMLHttpRequest.prototype.xhr_open)&&(a.XMLHttpRequest.prototype.xhr_open=a.XMLHttpRequest.prototype.open,a.XMLHttpRequest.prototype.xhr_send= a.XMLHttpRequest.prototype.send,a.XMLHttpRequest.prototype.xhr_abort=a.XMLHttpRequest.prototype.abort)};w.overrideMethods=function(a){a.XMLHttpRequest.prototype.open=_xhrOpen;a.XMLHttpRequest.prototype.send=_xhrSend;a.XMLHttpRequest.prototype.abort=_xhrAbort};w.captureMethods(h);k.subscribe({topic:'core/configure',callback:function(){!0==f.sequenceXHR&&!0==d.def(XMLHttpRequest)&&w.overrideMethods(h)}});k.subscribe({topic:'core/load',callback:function(){Yo.sequence.scanTags(!1)}});var m={},F={};_trackEvent= function(a,b,c){d.def(F[b])||(F['on'+b]={object:a,name:b,triggered:!1,event:null,listeners:[]},d.addEvent(a,b,function(a){var c=F['on'+b],d=c.listeners;c.event=a;navigator.userAgent.match(/MSIE /)&&(c.event={type:a.type});for(var f=0;f<d.length;f++)d[f].call(c.object,a);c.triggered=!0}),!a.yo_addEventListener&&a.addEventListener&&c&&(a.yo_addEventListener=a.addEventListener,a.addEventListener=S(!0)),!a.yo_attachEvent&&a.attachEvent&&c&&(a.yo_attachEvent=a.attachEvent,a.attachEvent=S(!1)))};m.loadEvents= function(){_trackEvent(h,'load',!0);_trackEvent(document,'readystatechange',!1);_trackEvent(document,'DOMContentLoaded',!1);_trackEvent(document,'DOMFrameContentLoaded',!0)};var J=null,Y=function(a){this.tempImage=new J;var b=a.image.onload;a.image.onload=null;this.tempImage.onload=function(c){b&&b.call(a.image,c);k.publish({topic:'sequence/afterloaded/'+a.key,message:arguments})};var c=a.image.onerror;a.image.onerror=null;this.tempImage.onerror=function(b){c&&c.call(a.image,b);k.publish({topic:'sequence/afterloaded/'+ a.key,message:arguments})};k.publish({topic:'sequence/beforeloading/'+a.key,message:arguments});this.tempImage.src=a.src},ka=function(){null==J&&(J=Image,Image=function(){var a=new J;try{Object.defineProperty(a,'src',{set:function(b){Yo.utils.log('Overloaded image src being set',b);b={src:b,key:b.toLowerCase()};k.publish({topic:'sequence/captured',message:b});var e={src:b.src,key:b.key,nodeName:'image'};nodeConfig=H(e);var d=nodeConfig.clone();d.type='image';d.src=e.src;d.image=this;d.newNode=e;f.delayed.push(d); d.loadImage=Y;!0==f.afterShockLoaded&&d.execute();b.image=a;'none'==nodeConfig.delayType&&Y(b)}})}catch(b){d.log(b)}return a})};k.subscribe({topic:'core/configure',callback:function(){!0==f.sequenceImage&&ka()}});k.subscribe({topic:'core/load',callback:function(){}});_delayed().prototype.defer=function(a){this.delayType='defer';this.delayValue=a;this.execute=function(){if(!1!=f.afterShockLoaded&&!0!=this.executed){this.executed=!0;d.log('Loading ',this.newNode,' via timer event. It will load in ', this.delayValue);var a=this;setTimeout(function(){a.afterShock()},1*this.delayValue);return this}};return this};_delayed().prototype.event=function(a){this.delayType='event';this.delayValue=a;this.execute=function(){if(!1!=f.afterShockLoaded&&!0!=this.executed){this.executed=!0;d.log('Event handling '+this.before.src+' '+this.delayValue);var a=this.delayValue.split(' '),c=a[0].toLowerCase();'beforeloading'==c||'afterloaded'==c?k.subscribe({topic:'sequence/'+c+'/'+a[1],context:this,callback:function(a){d.log('Loading '+ this.before.src+' via event handler '+this.delayValue);this.afterShock()}}):fa(d.select(a[1]),a,this);return this}};return this};k.subscribe({topic:'core/load',callback:function(){}});var A={},x={top:0-f.offset,left:0-f.offset,height:0,width:0,right:0,bottom:0};_throttle=function(a,b){var c=0;return function(){var e=+new Date;e-c<b||(c=e,a.apply(this,arguments))}};_saveViewport=function(){x.height=h.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;x.bottom=x.height;x.width= h.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;x.right=x.width};_showIfVisible=function(a,b,c){if(!0==d.contains(document.documentElement,c)){if(a=_getBoundingClientRect(c),!1==_advancedDetectionMode(c)&&a.top<x.height+f.offset||!0==_advancedDetectionMode(c)&&(!f.lazyCheckSize||0<a.width&&0<a.height)&&!0==T(a,x)&&!0==_notClipped(c,a))return d.log('showIfVisible is visible ',b,', ',c),f.delayed[b].afterShock(),!0}else return!1};_advancedDetectionMode=function(a){return null!= f.intervalID&&d.def(a.getBoundingClientRect)};_getBoundingClientRect=function(a){a=a.getBoundingClientRect();d.undef(a.width)&&(a={top:a.top,left:a.left,right:a.right,bottom:a.bottom,width:a.right-a.left,height:a.bottom-a.top});return a};_notClipped=function(a,b){if(!0==d.undef(a.yo_clipped)){for(var c=a.parentNode;null!=c&&1==c.nodeType;){var e=la(c,'overflow');if(e&&'hidden'==e.toLowerCase()){a.yo_clipped=c;break}c=c.parentNode}!0==d.undef(a.yo_clipped)&&(a.yo_clipped=!1)}return!1!=a.yo_clipped? T(b,_getBoundingClientRect(a.yo_clipped)):!0};var E,Z;document.defaultView&&document.defaultView.getComputedStyle&&(E=function(a,b){var c,e;if(e=a.ownerDocument.defaultView){if(e=e.getComputedStyle(a,null))c=e.getPropertyValue(b),''!==c||d.contains(a.ownerDocument.documentElement,a)||(c=a.style[b]);return c}});document.documentElement.currentStyle&&(Z=function(a,b){var c=a.currentStyle&&a.currentStyle[b];return''===c?'auto':c});var la=E||Z;document.getElementsByClassName||(document.getElementsByClassName= function(a){return this.querySelectorAll('.'+a)});A.scrollHandler=function(a){_saveViewport();if(d.undef(document.documentElement.getBoundingClientRect))return!0;for(var b=a=0;b<f.delayed.length;b++)if(f.delayed[b].isConfig('lazy')){var c=b,e=f.delayed[c],g=e.delayValue;if('string'===typeof g)g=d.select(g);else if(null==g||d.def(g))g=e.before;null!=g&&_showIfVisible(e.before,c,g);a++}};A.delayed=function(a){this.delayType='lazy';this.delayValue=a;this.execute=function(a){return this};return this}; E=_throttle(A.scrollHandler,20);d.addEvent(h,'scroll',E);d.addEvent(h,'resize',E);k.subscribe({topic:'core/load',callback:function(){A.scrollHandler()}});_delayed().prototype.lazy=A.delayed;k.subscribe({topic:'core/configure',callback:function(a){0<a.lazyTimer&&null==f.intervalID&&(f.intervalID=setInterval(A.scrollHandler,a.lazyTimer))}});_delayed().prototype.none=function(){this.delayType='none';this.execute=function(){return this.afterShock()};return this};_delayed().prototype.remove=function(a, b,c){var e=!1,f='yostore'+d.metaDataValue('resource.version')+this.key;d.undef(a)||'always'==a?e=!0:'session'==a?sessionStorage&&'true'==sessionStorage.getItem(f)?e=!0:sessionStorage&&sessionStorage.setItem(f,'true'):'visitor'==a&&(localStorage&&'true'==localStorage.getItem(f)?e=!0:localStorage&&localStorage.setItem(f,'true'));if(!0==e)this.delayType='remove',this.execute=function(){return this};else this[b](c);return this};var n={};domCompleteTriggered=!1;n.node=function(a){if(a=d.select(a))a.yo_ac= d.def(a.yo_ac)?a.yo_ac:a.appendChild,a.yo_ib=d.def(a.yo_ib)?a.yo_ib:a.insertBefore,a.appendChild=ia,a.insertBefore=ha};n.clearNode=function(a){d.def(a.yo_ib)&&(me.insertBefore=me.yo_ib);d.def(a.yo_ac)&&(me.appendChild=me.yo_ac)};n.addScanner=function(a){f.scan||(f.scan=[]);-1===d.inArray(a,f.scan)&&f.scan.push(a)};n.displayNow=function(){d.log('Handle the display of all visible tags up to now.');n.scanTags(!0);A.scrollHandler({})};n.createTimer=function(a,b){Yo.configure({lazyTimer:a});b&&Yo.configure({lazyCheckSize:b})}; n.resource=I;n.script=function(a){var b=I(a);b.src=a;b.newNode=a;b.before={src:a};b.load=function(){var a=document.createElement('script');a.type='text/javascript';a.async=!0;a.yo_src=this.url;document.getElementsByTagName('script')[0].parentNode.appendChild(a);return this};b.eval=function(){f.delayed.push(this);this.how='eval';this.type='inner';this.execute();return this};b.writeLocation=function(a){this.writeLocation=a;return this};return b};n.xhr=w.create;n.content=function(a){var b=ea(a);k.publish({topic:'sequence/captured', message:{delayed:b,location:a}});b.load=function(){d.log('Sequence a script = '+a.id+', type '+this.type);null==this.delayType||'none'==this.delayType?d.log('Content found that needs to be loaded immediately'):d.log('Content found that needs to be sequenced',this.delayType,this.delayValue);this.execute(f.delayed.length-1);f.delayed.push(this)};return b};n.event=m;n.image=function(a){return I(a)};n.scanTags=function(a){if(f.scan){for(var b=0,c=f.scan.length;b<c;b++){var e=f.scan[b],g=document.getElementsByTagName(e), h=void 0;d.log('Find all '+e+' tags in the document.');for(var k=0,n=g.length;k<n;k+=1)if(h=g[k],'true'!==h.getAttribute(f.pre+'loaded')){var m=R(h),r=h.getAttribute(f.pre+'style');m?(d.log('Found src ',e,', src = '+m+' tag to handle with AfterShocK.'),Yo.sequence.content(h).load()):'script'==e?(m=h.getAttribute('type'),h.getAttribute(f.pre+'src'),m&&-1<m.indexOf('yo/sequence')?(d.log('Found a '+e+', yo/sequence tag to handle with AfterShocK.'),Yo.sequence.content(h).load()):'yo/abtest'==m&&_abTestScript(h)): r&&(d.log('Found style ',e,', src = '+m+' tag to handle with AfterShocK.'),h=Yo.sequence.content(h),h.type='style',h.before=h.newNode,h.load())}}!0!==a&&(f.scan=[])}};n.cloakImages=function(a,b){if(!0!=d.undef(h.btoa))for(var c=0,e=a.length;c<e;c+=1){var f=a[c],k=document.getElementsByTagName(f);d.log('Cloak '+f);for(var l=0,m=k.length;l<m;l+=1)for(var n=k[l],r=0,y=b.length;r<y;r+=1){var q=b[r],t=n.getAttribute(q);null!=t&&(d.log('Cloak '+f,q,t),n.setAttribute(q,'data:image/cloaked;base64,'+btoa(t)))}}}; n.document=Q;n.captureMethods=w.captureMethods;n.overrideMethods=w.overrideMethods;m=document.getElementsByTagName('script');0<m.length&&n.node(m[0].parentNode);n.node(document.getElementsByTagName('head')[0]);k.subscribe({topic:'core/start',callback:function(){W()}});k.subscribe({topic:'core/configure',callback:function(){W()}});k.subscribe({topic:'core/load',callback:function(){domCompleteTriggered=!0;for(var a=0;a<f.delayed.length;a++)f.delayed[a].execute()}});k.subscribe({topic:'core/load',callback:function(){if(d.def(f.rum)&& d.def(f.rum.beaconUrl)){var a=document.createElement('img'),b=f.rum.beaconUrl+'?v=1&url='+document.location.href+'&time='+(new Date).getTime();if(d.def(h.performance)){var c=h.performance.timing.navigationStart,e=h.performance.timing;for(key in e)(time=e[key])&&(b+='&'+key+'='+(time-c))}d.log('Sending timing data to ',b);(c=d.metaDataValue('X-Yottaa-Optimizations'))&&(b+='&'+c.replace(/ /g,'&').replace(/\//g,'='));a.src=b}}});var u={},m={};_abTest=function(a,b,c,e,f,k,l,m){return Yo.sequence.resource(e).none().beforeLoading(function(){d.log('adding the google segmentation using a custom (dimension'+ a+', '+b+', '+c+')',f,k);Yo.stats().errors.has&&(c+='_error');if('universal'==f){var e=!1;h.ga=function(){if(d.def(a)&&2<arguments.length&&0<=arguments[0].indexOf('set')&&arguments[1]!='dimension'+a){if((h.ga.q=h.ga.q||[]).push(arguments),ga(arguments[0],'dimension'+a,c),e=!0,!0==d.def(l)){for(var b=[],f=0;f<h.ga.q.length;f++)if(3!=h.ga.q[f].length||h.ga.q[f][1]!='dimension'+l)b[b.length]=h.ga.q[f];h.ga.q=b}}else(h.ga.q=h.ga.q||[]).push(arguments),!0==d.undef(l)&&!1==e&&((h.ga.q=h.ga.q||[]).push(['set', 'dimension'+a,c]),e=!0);_abTestAnalyticsUniversal(arguments)}}else if(d.def(_gaq)){for(var n=1,r=[],q=0;q<_gaq.length;q++)d.def(_gaq[q])&&2<_gaq[q].length&&-1!=_gaq[q][0].indexOf('_setCustomVar')?(!0!=d.undef(a)&&_gaq[q][1]==a||!0!=d.undef(l)&&_gaq[q][1]==l||(r[r.length]=_gaq[q]),n=q):r[r.length]=_gaq[q];_gaq=r;d.def(a)&&(r='_setCustomVar',0<_gaq.length&&0<_gaq[0].length&&(q=_gaq[0][0].indexOf('.'),-1!=q&&(r=_gaq[0][0].substring(0,q+1)+r)),d.def(m)&&(a=m),_gaq.splice(n,0,[r,a,b,c,d.undef(k)?2:k])); d.log('abTestAnalyticsClassic()');_abTestAnalyticsClassic()}else d.log('Error creating ga information, no selected version',f)})};_getCookieVariant=function(a){return d.getCookie('yo_abtesting_'+a.name+'v'+a.version)};_setCookieVariant=function(a,b,c){d.setCookie('yo_abtesting_'+a.name+'v'+a.version,b,c)};_configureAbTestAnalytics=function(){var a=config.abTestingAnalytics;d.def(a)&&d.undef(a.loaded)&&(_abTest(void 0,void 0,void 0,a.url,a.gaVersion),d.log('Registering analytics',a.url,a.gaVersion), a.loaded=!0)};_executeAllAbTest=function(){d.undef(f.abTestingAnalytics)?d.log('Analytics for ab testing not properly defined'):'classic'==f.abTestingAnalytics.gaVersion?_executeAllAbTestClassic():_executeAllAbTestUniversal()};_executeAllAbTestUniversal=function(){for(var a in f.abTesting){var b=f.abTesting[a];_executeAbTest(b);ga('set','dimension'+b.analytics.index,b.valuePrefix+b.name+'_v'+b.version+'_'+b.chosenVariant)}!0==u.delayedTrack&&ga('send','pageview')};_executeAllAbTestClassic=function(){var a= null;if(d.def(h._gat)&&d.def(u.uaCode))for(var b=h._gat._getTrackers(),c=0;c<b.length;c++)b[c]._getAccount()==u.uaCode&&(a=b[c]);for(var e in f.abTesting)b=f.abTesting[e],_executeAbTest(b),c=2,'hit'==b.analytics.stickiness?c=3:'visitor'==b.analytics.stickiness&&(c=1),null!=a?a._setCustomVar(b.analytics.index,b.analytics.name,b.valuePrefix+b.name+'_v'+b.version+'_'+b.chosenVariant,c):d.def(h._gaq)&&h._gaq.push(['_setCustomVar',b.analytics.index,b.analytics.name,b.valuePrefix+b.name+'_v'+b.version+ '_'+b.chosenVariant,c]);!0==u.delayedTrack&&(null!=a?(a._trackPageview(),d.log('pageTracker._trackPageview()')):d.def(h._gaq)?(h._gaq.push(['_trackPageview']),d.log("window._gaq.push(['_trackPageview'])")):d.log('Did not find the UA code so we can not track'))};_executeAbTest=function(a){var b=_getCookieVariant(a);null==b&&(b=_chooseVariant(a));'hit'!=a.stickiness&&_setCookieVariant(a,b,'visitor'==a.stickiness?864E5:60*(d.undef(a.sessionTime)?30:a.sessionTime));d.log('Variant',b,'was chooen for test', a.name);a.chosenVariant=b;a=a.variants[b];if(d.undef(a))'original'!=b&&d.log('Using original content as the variant',b,'was not found');else for(b=0;b<a.targets.length;b++){var c=a.targets[b];'function'==typeof c?c():Yo.sequence.content(c).load()}};_abTestScript=function(a){var b=a.getAttribute(f.pre+'abtestname'),c=f.abTesting[b];if(d.undef(c))d.log('Found variant script for test',b,"but doesn't exist");else if(b=a.getAttribute(f.pre+'variant'),d.def(c.variants[b]))d.log('Variant script with existing name', b,'already exists. This variant will be excluded');else{var b=a.getAttribute(f.pre+'variantname'),e=a.getAttribute(f.pre+'splitcondition');d.undef(c.variants[b])?c.variants[b]={splitCondition:e,targets:[a]}:c.variants[b].targets.push(a);d.log('Found script variant',b,'with splitCondition',e)}};_chooseVariant=function(a){var b=a.variants;if('percentage'==a.splitBy){var c=0,e;for(e in b){a=b[e];var f=c;a.splitCondition*=1;c+=a.splitCondition;a.splitCondition+=f}100<b[b.length-1]&&d.log('Total percentage of variants is greater than 100, test will always leave out some variants'); c=100*Math.random();for(e in b)if(a=b[e],c<a.splitCondition)return e;return'original'}d.log('Unsupported splitType',a.splitBy,'for test',a.name)};_abTestAnalyticsUniversal=function(a){'send'==a[0]&&d.def(u.delayedTrack)&&(h.ga.q.pop(),u.delayedTrack=!0)};_abTestAnalyticsClassic=function(a){if(d.def(u.delayedTrack)){a=[];for(var b=0;b<_gaq.length;b++)d.undef(_gaq[b])||1>_gaq[b].length||'_trackPageview'!=_gaq[b][0]?('_setAccount'==_gaq[b][0]&&(u.uaCode=_gaq[b][1]),a[a.length]=_gaq[b]):u.delayedTrack= !0;_gaq=a}};m.universal=function(a,b,c,e){return _abTest(a,void 0,b,c,'universal',void 0,e)};m.classic=function(a,b,c,e,d,f){return _abTest(a,b,c,e,'classic',d,f)};m.omniture=function(a,b,c,e){var d=s.t;s.t=function(){c&&(s[c]=e+s[c]);s['eVar'+a]=b;return d.apply(this,arguments)}};m.abTesting=function(a){d.undef(a.variants)&&(a.variants={});d.undef(a.splitBy)&&(a.splitBy='percentage');d.undef(a.stickiness)&&(a.stickiness='session');d.undef(a.version)&&(a.version='0');d.undef(a.analytics)&&(a.analytics= {});d.undef(a.analytics.valuePrefix)&&(a.analytics.valuePrefix='yo_abtesting_');d.undef(a.analytics.name)&&(a.analytics.name='yottaa_abtest');d.undef(a.valuePrefix)&&(a.valuePrefix='');f.abTesting[a.name]=a};m.abVariant=function(a,b){var c=f.abTesting[name];d.undef(c)&&d.log('Test',name,'was not defined');c.variants.push(b)};k.subscribe({topic:'core/load',callback:function(){_executeAllAbTest()}});var $={releaseDate:'2016-06-24',errors:{has:!1},config:f},N=function(){return $};k.subscribe({topic:'core/configure', callback:function(a){N.config=f}});k.subscribe({topic:'core/start',callback:function(){N.config=f}});d.addEvent(h,'error',function(a,b,c){d.log('errorCapture',a,b,c);$.errors={has:!0}});h.Yo||(h.Yo={});m={utils:d,pubsub:k,configure:function(a){for(var b in a)'resources'==b?f.resources=f.resources.concat(a.resources):f[b]=a[b];k.publish({topic:'core/configure',message:f})},sequence:n,rum:function(a){f.rum={beaconUrl:a}},abTesting:m,stats:N};h.Yo=m;k.publish({topic:'core/start',message:m});h.yo_addScaner= Yo.sequence.addScanner;h.yo_createTimer=Yo.sequence.createTimer;h.yo_displayNow=Yo.sequence.displayNow;h.yo_configureAfterShock=Yo.configure;h.yo_afterShockStats=Yo.stats;h.yo_nodeWatch=Yo.sequence.node;h.yo_addResource=function(a,b,c,e,d,f){a=Yo.sequence.resource(a);a[b](c);e&&a.beforeLoading(e);d&&a.afterLoaded(d);f&&a.writeLocation(f)};h.yo_scriptLoader=function(a,b,c,e,d,f){a=Yo.sequence.script(a);a[b](c);e&&a.beforeLoading(e);d&&a.afterLoaded(d);f&&a.writeLocation(f);a.load()};h.yo_deferLoadResource= function(a,b,c,d,f){yo_addResource(a,'defer',b,c,d,f)};h.yo_lazyLoadResource=function(a,b,c,d,f){yo_addResource(a,'lazy',b,c,d,f)};return h.Yo}); 

